[[Graphite]] uses [[Carbon]] as its backing store. Carbon uses "schemas" to determine how long to retain data. It is very flexible.

=== Default Example ===
<pre>
[default_1min_for_1day]
pattern = .*
retentions = 60s:1d
</pre>

That regex will grab everything, and retain data at a 60second resolution for 1 day.

=== Complex Example ===
<pre>
[server_data]
priority = 100
pattern = ^servers\.
retentions = 1m:1y,5m:10y
</pre>
This more complex example has a longer retention period for server.* data. By adjusting the priority you can control which rule carbon applies first.

== WARNING ==
Changing your schemas does '''not''' automatically adjust your existing whisper files, only new ones.

If you want this change to take effect, you must resize your whisper files, or use a script to migrate them. Like this: https://github.com/jjack/Force-Graphite-Schemas/blob/master/force_schemas.pl


=== References ===
* https://github.com/jjack/Force-Graphite-Schemas/blob/master/force_schemas.pl
* http://graphite.wikidot.com/getting-your-data-into-graphite

[[Category:Graphite]]